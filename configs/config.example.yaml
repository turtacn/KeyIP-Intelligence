# KeyIP-Intelligence Platform â€” Example Configuration
# ============================================================
# This file is a SAFE REFERENCE copy of config.yaml.
# Copy this file to configs/config.yaml and replace every
# value with your real environment settings.
# ============================================================

server:
  # HTTP API server configuration
  http:
    host: "0.0.0.0"               # Bind address
    port: 8080                    # Listening port (1024-65535)
    read_timeout: 30s             # Max duration for reading request
    write_timeout: 30s            # Max duration for writing response
    max_header_bytes: 1048576     # Max header size (1MB)

  # gRPC server configuration
  grpc:
    host: "0.0.0.0"
    port: 9090
    max_recv_msg_size: 52428800   # 50MB
    max_send_msg_size: 52428800   # 50MB

database:
  # PostgreSQL configuration
  postgres:
    host: "localhost"
    port: 5432
    user: "keyip_app"
    password: "ExamplePassword!"  # Change this!
    dbname: "keyip_intelligence"
    sslmode: "disable"            # disable | require | verify-ca | verify-full
    max_open_conns: 25
    max_idle_conns: 10
    conn_max_lifetime: 5m

  # Neo4j Graph Database configuration
  neo4j:
    uri: "bolt://localhost:7687"
    user: "neo4j"
    password: "ExampleNeo4jPassword!" # Change this!
    max_connection_pool_size: 50
    connection_acquisition_timeout: 60s

cache:
  # Redis configuration
  redis:
    addr: "localhost:6379"
    password: ""                  # Leave empty if no password
    db: 0
    pool_size: 20
    min_idle_conns: 5
    dial_timeout: 5s
    read_timeout: 3s
    write_timeout: 3s

search:
  # OpenSearch configuration
  opensearch:
    addresses:
      - "http://localhost:9200"
    username: "admin"
    password: "ExampleOSPassword!" # Change this!
    max_retries: 3
    retry_on_status: [502, 503, 504]
    compress_request_body: true

  # Milvus Vector Database configuration
  milvus:
    address: "localhost"
    port: 19530
    username: ""
    password: ""
    connect_timeout: 10s
    read_timeout: 10s

messaging:
  # Kafka configuration
  kafka:
    brokers:
      - "localhost:9092"
    consumer_group: "keyip-intelligence-group"
    auto_offset_reset: "earliest"
    max_bytes: 10485760           # 10MB
    session_timeout: 30s
    heartbeat_interval: 3s
    rebalance_timeout: 60s

storage:
  # MinIO Object Storage configuration
  minio:
    endpoint: "localhost:9000"
    access_key: "minioadmin"
    secret_key: "minioadmin"      # Change this!
    use_ssl: false
    bucket_name: "keyip-documents"
    region: "us-east-1"
    part_size: 67108864           # 64MB

auth:
  # Keycloak configuration
  keycloak:
    base_url: "http://localhost:8180"
    realm: "keyip"
    client_id: "keyip-api"
    client_secret: "ExampleClientSecret!" # Change this!
    admin_user: "admin"
    admin_password: "admin"       # Change this!
    token_endpoint: "/realms/keyip/protocol/openid-connect/token"
    userinfo_endpoint: "/realms/keyip/protocol/openid-connect/userinfo"

  # JWT configuration
  jwt:
    secret: "ExampleJWTSecret!"   # Change this!
    issuer: "keyip-api"
    expiry: 24h
    refresh_expiry: 168h          # 7 days
    signing_method: "HS256"

intelligence:
  models_dir: "./models"

  # MolPatent-GNN Model
  molpatent_gnn:
    model_path: "molpatent_gnn.pt"
    batch_size: 32
    timeout: 30s
    device: "cpu"                 # cpu | cuda
    num_workers: 4

  # ClaimBERT Model
  claim_bert:
    model_path: "claim_bert_v1"
    max_seq_length: 512
    timeout: 30s
    device: "cpu"
    vocab_path: "vocab.txt"

  # StrategyGPT
  strategy_gpt:
    endpoint: "https://api.openai.com/v1"
    api_key: "sk-ExampleKey!"     # Change this!
    model_name: "gpt-4"
    max_tokens: 4096
    temperature: 0.7
    top_p: 0.9
    timeout: 120s
    retry_count: 3
    retry_delay: 2s

  # ChemExtractor
  chem_extractor:
    ocr_endpoint: "http://localhost:8081/ocr"
    ner_model_path: "chem_ner_v1"
    image_preprocessing: true
    supported_formats: ["png", "jpg", "pdf"]
    timeout: 60s

  # InfringeNet
  infringe_net:
    model_path: "infringe_net.pt"
    threshold: 0.85
    batch_size: 16
    timeout: 30s
    similarity_metric: "cosine"

monitoring:
  # Prometheus metrics
  prometheus:
    enabled: true
    port: 9091
    path: "/metrics"
    namespace: "keyip"

  # Logging
  logging:
    level: "info"                 # debug | info | warn | error
    format: "json"                # json | text
    output: "stdout"              # stdout | file
    file_path: "/var/log/keyip.log"
    max_size: 100                 # MB
    max_backups: 3
    max_age: 28                   # days
    compress: true

  # Distributed Tracing
  tracing:
    enabled: false
    endpoint: "http://localhost:4317"
    sample_rate: 0.1
    service_name: "keyip-intelligence"
    environment: "production"

notification:
  # Email
  email:
    smtp_host: "smtp.example.com"
    smtp_port: 587
    username: "user@example.com"
    password: "ExampleEmailPassword!" # Change this!
    from: "noreply@keyip.com"
    use_tls: true
    timeout: 10s

  # WeChat Work
  wechat_work:
    corp_id: "wwExampleCorpId"
    agent_id: "1000002"
    secret: "ExampleWeChatSecret!" # Change this!
    token: "ExampleToken"
    encoding_aes_key: "ExampleAESKey"

# //Personal.AI order the ending
